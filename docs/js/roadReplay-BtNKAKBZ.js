import{ao as j,bP as q,r as g,c as R,m as S,a6 as $,G as m,E as y,J as l,Z as C,a0 as h,H as B,u as w}from"./vendor-Bin-ZlIR.js";import{_ as P}from"./index-CCtB8nAT.js";var J=q();const K=j(J),L={class:"road-replay"},V={key:0,class:"control-panel"},I=["disabled"],N=["disabled"],T={key:1,class:"info-panel"},z={class:"time"},H={class:"event"},W={__name:"TrackPlayback",props:{points:{type:Array,required:!0},apiKey:{type:String,required:!0},securityJsCode:{type:String,required:!0},showControls:{type:Boolean,default:!0}},setup(f){const t=f;let o=null,n=null,k=null,v=null;const c=g(!1),s=g(null),_=R(()=>t.points.map(e=>e.value));S(()=>{window._AMapSecurityConfig={securityJsCode:t.securityJsCode},K.load({key:t.apiKey,version:"2.0",plugins:["AMap.MoveAnimation"]}).then(e=>{x(e)}).catch(e=>{console.error("é«˜å¾·åœ°å›¾åŠ è½½å¤±è´¥:",e)})}),$(()=>{n&&n.stopMove(),o&&o.destroy()});const x=e=>{o=new e.Map("mapContainer",{viewMode:"3D",zoom:8,center:t.points[0].value}),n=new e.Marker({map:o,position:t.points[0].value,icon:"https://a.amap.com/jsapi_demos/static/demo-center-v2/car.png",offset:new e.Pixel(-13,-26)}),k=new e.Polyline({map:o,path:_.value,strokeColor:"#3366FF",strokeWeight:6,strokeStyle:"solid",showDir:!0}),v=new e.Polyline({map:o,strokeColor:"#AF5",strokeWeight:6}),n.on("moving",a=>{v.setPath(a.passedPath);const p=a.target.getPosition();D(p),o.setCenter(p,!0)}),n.on("moveend",()=>{c.value=!1,s.value=t.points[t.points.length-1]}),M(e),o.setFitView([k]),s.value=t.points[0]},M=e=>{t.points.forEach((a,p)=>{let i="#409EFF",r="ğŸ“";switch(a.type){case"start":i="#67C23A",r="ğŸš©";break;case"end":i="#F56C6C",r="ğŸ";break;case"overnight":i="#909399",r="ğŸŒ™";break;case"important":i="#E6A23C",r="âš ï¸";break}const u=document.createElement("div");u.innerHTML=`
      <div style="
        background: ${i};
        color: white;
        padding: 4px 8px;
        border-radius: 20px;
        font-size: 12px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        cursor: pointer;
        white-space: nowrap;
      ">
        <span>${r}</span>
        ${a.name}
      </div>
    `;const d=new e.Marker({position:a.value,content:u,offset:new e.Pixel(-50,-20)});d.on("click",()=>{A(p)}),o.add(d)})},E=()=>{c.value=!0,n.moveAlong(_.value,{duration:2e3,autoRotation:!0})},F=()=>{c.value=!1,n.pauseMove()},b=()=>{c.value=!1,n.stopMove(),n.setPosition(t.points[0].value),v.setPath([]),s.value=t.points[0],o.setCenter(t.points[0].value)},A=e=>{b(),n.setPosition(t.points[e].value),s.value=t.points[e],o.setCenter(t.points[e].value),o.setZoom(12)},D=e=>{const a=e.getLng(),p=e.getLat();let i=1/0,r=null;t.points.forEach(u=>{const d=Math.sqrt(Math.pow(u.value[0]-a,2)+Math.pow(u.value[1]-p,2));d<i&&(i=d,r=u)}),i<.01&&(s.value=r)};return(e,a)=>(y(),m("div",L,[a[0]||(a[0]=l("div",{id:"mapContainer",class:"map-container"},null,-1)),f.showControls?(y(),m("div",V,[l("button",{class:"btn btn-primary",onClick:E,disabled:c.value}," å¼€å§‹ ",8,I),l("button",{class:"btn",onClick:F,disabled:!c.value}," æš‚åœ ",8,N),l("button",{class:"btn",onClick:b}," ç»“æŸ ")])):C("",!0),s.value?(y(),m("div",T,[l("h4",null,h(s.value.name),1),l("p",z,h(s.value.info),1),l("p",H,h(s.value.event),1)])):C("",!0)]))}},Z=P(W,[["__scopeId","data-v-95909ea9"]]),G={class:"page"},U={__name:"roadReplay",setup(f){const t="78c4c4d51f34fec002add1442dd42b68",o="c1fa1b638024615cd5c68753ba3ca472",n=[{name:"å—é˜³Â·è½¦ç«™åŒ—è·¯å’Œè°å°åŒº",value:[112.54,33.02],info:"26/02/20 17:20 å‡ºå‘",event:"ğŸš© èµ·ç‚¹",type:"start"},{name:"æ³Œé˜³æœåŠ¡åŒº",value:[113.31,32.79],info:"26/02/20 18:27 åˆ°è¾¾ Â· åœç•™5åˆ†é’Ÿ",event:"ç´¯è®¡è¡Œé©¶ 120km Â· ä¸Šå•æ‰€ Â· ä¹°æ°´",type:"rest"},{name:"ç½—å±±æœåŠ¡åŒº",value:[114.41,32.15],info:"26/02/20 19:37 åˆ°è¾¾ Â· åœç•™25åˆ†é’Ÿ",event:"ç´¯è®¡è¡Œé©¶ 260km Â· åƒæ™šé¥­",type:"rest"},{name:"ç½—é›†æœåŠ¡åŒº",value:[116.28,31.99],info:"26/02/20 21:09 åˆ°è¾¾ Â· è¿‡å¤œ9.5h",event:"ğŸŒ™ ç´¯è®¡è¡Œé©¶ 370km Â· å‡†å¤‡å’–å•¡é¥®æ–™ Â· è½¦å†…è¿‡å¤œ Â· æ—©ä¸Š8ç‚¹å‡†æ—¶å‡ºå‘",type:"overnight"},{name:"å·¢æ¹–æœåŠ¡åŒº",value:[117.84,31.62],info:"26/02/21 09:37 åˆ°è¾¾ Â· åœç•™15åˆ†é’Ÿ",event:"âš ï¸ æƒŠé™©ä¸€åˆ» Â· å‰è½¦æ€¥åˆ¹è½¦ Â· é‡åˆ°å¥½å¤šè½¦ç¥¸ Â· ç´¯è®¡è¡Œé©¶ 580km",type:"important"},{name:"èŒ…å±±æœåŠ¡åŒº",value:[119.37,31.72],info:"26/02/21 13:10 åˆ°è¾¾ Â· åœç•™15åˆ†é’Ÿ",event:"ç´¯è®¡è¡Œé©¶ 750km Â· æ‰¾ä¸åˆ°åœè½¦ä½ Â· å‡‘ä¹åƒä¸€å£ç»§ç»­å‡ºå‘",type:"rest"},{name:"é˜³æ¾„æ¹–æœåŠ¡åŒº",value:[120.84,31.42],info:"26/02/21 16:42 åˆ°è¾¾ Â· åœç•™30åˆ†é’Ÿ",event:"ğŸ›‘ ä¼‘æ¯åŠå°æ—¶ Â· ç´¯è®¡è¡Œé©¶ 870km Â· æœåŠ¡åŒºå…¨æ˜¯äººå’Œè½¦",type:"important"},{name:"ä¸Šæµ·Â·ååº·ä½³è‹‘",value:[121.68,31.27],info:"26/02/21 18:30 åˆ°è¾¾",event:"ğŸ ç»ˆç‚¹ Â· ç´¯è®¡è¡Œé©¶ 1000km Â· æ€»è€—æ—¶25h",type:"end"}];return(k,v)=>(y(),m("div",G,[B(Z,{points:n,"api-key":w(t),"security-js-code":w(o)},null,8,["api-key","security-js-code"])]))}},X=P(U,[["__scopeId","data-v-de44beec"]]);export{X as default};
