import{o as E,p as b}from"./resources-6e3d64cc.js";import{_ as w,a as I}from"./index-c041b1bc.js";import{a as c,e as k,a9 as T,T as n,U as l,I as _,ar as p,n as U,V as L,a5 as O,u as A}from"./vendor-bb163b90.js";const C={class:"waterfall-container"},d=4,F=350,M=100,N={__name:"index",setup($){const u=c(Array.from({length:296},(e,o)=>({id:o+1,thumbnail:`${E}${b}${o+1}.jpg?x-oss-process=image/resize,w_350,h_350,m_fill`,loaded:!1}))),i=c([]),m=()=>{i.value=Array.from({length:d},()=>[]);const e=new Array(d).fill(0);u.value.forEach((o,a)=>{let t=0;for(let s=1;s<d;s++)e[s]<e[t]&&(t=s);i.value[t].push({...o}),e[t]+=F+15})},h=e=>i.value[e]||[];let r=null;const f=c([]),v=()=>{r=new IntersectionObserver(e=>{e.forEach(o=>{if(o.isIntersecting){const a=o.target,t=a.dataset.id,s=u.value.find(y=>y.id==t);s&&!s.loaded&&(s.loaded=!0,r.unobserve(a))}})},{rootMargin:`${M}px 0px`})},g=()=>{r&&U(()=>{f.value.forEach(e=>{e&&r.observe(e)})})};k(()=>{m(),v(),g()}),T(()=>{r&&r.disconnect()});const x=e=>[e.thumbnail.split("?")[0]];return(e,o)=>(n(),l("div",C,[(n(),l(_,null,p(4,a=>L("div",{class:"waterfall-column",key:a},[(n(!0),l(_,null,p(h(a-1),t=>(n(),l("div",{key:t.id,class:"photo-item",ref_for:!0,ref_key:"photoRefs",ref:f},[O(A(I),{class:"photo-image",src:t.thumbnail,fit:"cover","preview-src-list":x(t),loading:"lazy","hide-on-click-modal":""},null,8,["src","preview-src-list"])]))),128))])),64))]))}},V=w(N,[["__scopeId","data-v-988ef644"]]);export{V as default};
