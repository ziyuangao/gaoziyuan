import{o as U,p as A}from"./resources-6e3d64cc.js";import{a as o,e as E,a9 as k,T as _,U as m,I as x,ar as y,n as I,V as L,a5 as z,u as C}from"./vendor-13527336.js";import{_ as H,a as M}from"./index-5c9403ba.js";function $(){const c=o("pc"),u=o(window.innerWidth),d=o(window.innerHeight),a=o(!1),t=o(!1),n=o(!0),p=()=>{u.value=window.innerWidth,d.value=window.innerHeight,u.value<768?(c.value="mobile",a.value=!0,t.value=!1,n.value=!1):u.value>=768&&u.value<=1024?(c.value="tablet",a.value=!1,t.value=!0,n.value=!1):(c.value="pc",a.value=!1,t.value=!1,n.value=!0)},l=()=>{const h=navigator.userAgent.toLowerCase(),w=/mobile|android|iphone|ipod|windows phone|blackberry|webos|opera mini|iemobile/.test(h);/ipad|tablet|kindle|silk/.test(h)?(c.value="tablet",a.value=!1,t.value=!0,n.value=!1):w&&(c.value="mobile",a.value=!0,t.value=!1,n.value=!1)},v=()=>{p()};return E(()=>{l(),p(),window.addEventListener("resize",v)}),k(()=>{window.removeEventListener("resize",v)}),{deviceType:c,screenWidth:u,screenHeight:d,isMobile:a,isTablet:t,isPC:n}}const O={class:"waterfall-container"},b=4,W=100,B={__name:"index",setup(c){const{screenWidth:u}=$(),d=u.value<768?100:350,a=o(Array.from({length:296},(e,i)=>({id:i+1,thumbnail:`${U}${A}${i+1}.jpg?x-oss-process=image/resize,w_${d},h_${d},m_fill`,loaded:!1}))),t=o([]),n=()=>{t.value=Array.from({length:b},()=>[]);const e=new Array(b).fill(0);a.value.forEach((i,f)=>{let s=0;for(let r=1;r<b;r++)e[r]<e[s]&&(s=r);t.value[s].push({...i}),e[s]+=d+15})},p=e=>t.value[e]||[];let l=null;const v=o([]),h=()=>{l=new IntersectionObserver(e=>{e.forEach(i=>{if(i.isIntersecting){const f=i.target,s=f.dataset.id,r=a.value.find(T=>T.id==s);r&&!r.loaded&&(r.loaded=!0,l.unobserve(f))}})},{rootMargin:`${W}px 0px`})},w=()=>{l&&I(()=>{v.value.forEach(e=>{e&&l.observe(e)})})};E(()=>{n(),h(),w()}),k(()=>{l&&l.disconnect()});const g=e=>[e.thumbnail.split("?")[0]];return(e,i)=>(_(),m("div",O,[(_(),m(x,null,y(4,f=>L("div",{class:"waterfall-column",key:f},[(_(!0),m(x,null,y(p(f-1),s=>(_(),m("div",{key:s.id,class:"photo-item",ref_for:!0,ref_key:"photoRefs",ref:v},[z(C(M),{class:"photo-image",src:s.thumbnail,fit:"cover","preview-src-list":g(s),loading:"lazy","hide-on-click-modal":""},null,8,["src","preview-src-list"])]))),128))])),64))]))}},R=H(B,[["__scopeId","data-v-f5f924d3"]]);export{R as default};
