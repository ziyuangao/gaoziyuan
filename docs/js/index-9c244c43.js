import{o as U,p as A}from"./resources-6e3d64cc.js";import{a as o,e as E,a9 as k,T as h,U as m,I as x,ar as y,n as I,V as L,a5 as M,u as z}from"./vendor-bb163b90.js";import{_ as C,a as H}from"./index-982328f5.js";function O(){const c=o("pc"),u=o(window.innerWidth),f=o(window.innerHeight),a=o(!1),t=o(!1),n=o(!0),p=()=>{u.value=window.innerWidth,f.value=window.innerHeight,u.value<768?(c.value="mobile",a.value=!0,t.value=!1,n.value=!1):u.value>=768&&u.value<=1024?(c.value="tablet",a.value=!1,t.value=!0,n.value=!1):(c.value="pc",a.value=!1,t.value=!1,n.value=!0)},l=()=>{const _=navigator.userAgent.toLowerCase(),b=/mobile|android|iphone|ipod|windows phone|blackberry|webos|opera mini|iemobile/.test(_);/ipad|tablet|kindle|silk/.test(_)?(c.value="tablet",a.value=!1,t.value=!0,n.value=!1):b&&(c.value="mobile",a.value=!0,t.value=!1,n.value=!1)},v=()=>{p()};return E(()=>{l(),p(),window.addEventListener("resize",v)}),k(()=>{window.removeEventListener("resize",v)}),{deviceType:c,screenWidth:u,screenHeight:f,isMobile:a,isTablet:t,isPC:n}}const B={class:"waterfall-container"},w=4,F=100,N={__name:"index",setup(c){const{isMobile:u}=O(),f=u.value?100:350,a=o(Array.from({length:296},(e,i)=>({id:i+1,thumbnail:`${U}${A}${i+1}.jpg?x-oss-process=image/resize,w_350,h_350,m_fill`,loaded:!1}))),t=o([]),n=()=>{t.value=Array.from({length:w},()=>[]);const e=new Array(w).fill(0);a.value.forEach((i,d)=>{let s=0;for(let r=1;r<w;r++)e[r]<e[s]&&(s=r);t.value[s].push({...i}),e[s]+=f+15})},p=e=>t.value[e]||[];let l=null;const v=o([]),_=()=>{l=new IntersectionObserver(e=>{e.forEach(i=>{if(i.isIntersecting){const d=i.target,s=d.dataset.id,r=a.value.find(T=>T.id==s);r&&!r.loaded&&(r.loaded=!0,l.unobserve(d))}})},{rootMargin:`${F}px 0px`})},b=()=>{l&&I(()=>{v.value.forEach(e=>{e&&l.observe(e)})})};E(()=>{n(),_(),b()}),k(()=>{l&&l.disconnect()});const g=e=>[e.thumbnail.split("?")[0]];return(e,i)=>(h(),m("div",B,[(h(),m(x,null,y(4,d=>L("div",{class:"waterfall-column",key:d},[(h(!0),m(x,null,y(p(d-1),s=>(h(),m("div",{key:s.id,class:"photo-item",ref_for:!0,ref_key:"photoRefs",ref:v},[M(z(H),{class:"photo-image",src:s.thumbnail,fit:"cover","preview-src-list":g(s),loading:"lazy","hide-on-click-modal":""},null,8,["src","preview-src-list"])]))),128))])),64))]))}},R=C(N,[["__scopeId","data-v-6d8c2c7f"]]);export{R as default};
