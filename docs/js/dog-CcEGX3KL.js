import{o as C,u as E}from"./resources-CQeFrP1H.js";import{_ as R,d as H,a as j}from"./index-BuCwV4Ff.js";import{r as y,c as L,m as P,b2 as g,G as D,E as A,H as n,J as I,I as r,$ as p}from"./vendor-DGMjvXeI.js";const B=""+new URL("../img/dog-1-Cqzssvsx.jpg",import.meta.url).href,N=""+new URL("../img/dog-2-Uuju9tAi.jpg",import.meta.url).href,W=""+new URL("../img/dog-3-BofbVtKP.jpg",import.meta.url).href,q=""+new URL("../img/dog-4-Bk-bxIkf.jpg",import.meta.url).href,z=(U="",_={})=>{const l=async(e,a={})=>{const s=e.startsWith("http")?e:`${U}${e}`,c={headers:{"Content-Type":"application/json",..._.headers,...a.headers},..._,...a};try{const o=await fetch(s,c);if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return o.headers.get("content-type")?.includes("application/json")?await o.json():await o.text()}catch(o){throw console.error("请求失败:",o),o}};return{get:(e,a={},s={})=>{const c=new URLSearchParams(a).toString(),o=c?`${e}?${c}`:e;return l(o,{method:"GET",...s})},post:(e,a={},s={})=>l(e,{method:"POST",body:JSON.stringify(a),...s}),put:(e,a={},s={})=>l(e,{method:"PUT",body:JSON.stringify(a),...s}),delete:(e,a={})=>l(e,{method:"DELETE",...a}),request:l}},M=z(),O={class:"dog"},Y=["src"],G={__name:"dog",setup(U){var _={method:"GET",redirect:"follow"};const l=y(null),e=y(null),a=H(new Date).format("YYYY年MM月DD日"),s=y("1"),c=L(()=>`${C}${E}dog-${s.value}.jpg`),o=y(""),$=()=>{M.get("https://v2.xxapi.cn/api/dog",_).then(u=>{const t=u.data;o.value=`${a},${t}`})},k=()=>{if(!o.value){j.warning("请先获取文案或输入文案");return}const u=new Image;u.onload=function(){let w=30,v=0;const d=[],x=24;e.value.font=`${x}px Arial`;let i="";for(let h of o.value)e.value.measureText(i+h).width>680?(d.push(i),i=h):i+=h;i.length>0&&d.push(i);const S=u.width/u.height,b=340,T=b/S,V=T+20+d.length*28+30;l.value.width=340,l.value.height=V,e.value.clearRect(0,0,l.value.width,l.value.height),e.value.fillStyle="#ffffff",e.value.fillRect(0,0,l.value.width,l.value.height),e.value.drawImage(u,20,20,b,T),v=T+40,e.value.fillStyle="#000000";for(let h of d)e.value.fillText(h,w,v),v+=28;e.value.strokeStyle="#ebeef5",e.value.lineWidth=1,e.value.strokeRect(20,20,l.value.width-40,l.value.height-40),j.success("图片生成成功！")},u.onerror=function(){j.error("图片加载失败，请检查网络连接")};const t={1:B,2:N,3:W,4:q};u.src=t[s.value]};return P(()=>{e.value=l.value.getContext("2d")}),(u,t)=>{const m=g("el-row"),f=g("el-radio"),w=g("el-radio-group"),v=g("el-input"),d=g("el-button"),x=g("el-space");return A(),D("div",O,[n(x,{direction:"vertical",size:"large"},{default:r(()=>[n(m,{type:"flex",justify:"center"},{default:r(()=>[I("img",{src:c.value,alt:"",class:"top-img"},null,8,Y)]),_:1}),n(m,{type:"flex",justify:"center"},{default:r(()=>[n(w,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value=i)},{default:r(()=>[n(f,{value:"1",label:"舔狗男"},{default:r(()=>[...t[2]||(t[2]=[p("舔狗男",-1)])]),_:1}),n(f,{value:"2",label:"舔狗女"},{default:r(()=>[...t[3]||(t[3]=[p("舔狗女",-1)])]),_:1}),n(f,{value:"3",label:"记仇男"},{default:r(()=>[...t[4]||(t[4]=[p("记仇男",-1)])]),_:1}),n(f,{value:"4",label:"记仇女"},{default:r(()=>[...t[5]||(t[5]=[p("记仇女",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(m,null,{default:r(()=>[n(v,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=i=>o.value=i),style:{width:"360px"},autosize:"",type:"textarea",placeholder:"Please input"},null,8,["modelValue"])]),_:1}),n(m,{type:"flex",justify:"center"},{default:r(()=>[n(d,{type:"primary",onClick:$},{default:r(()=>[...t[6]||(t[6]=[p("随机文案",-1)])]),_:1}),n(d,{type:"primary",onClick:k},{default:r(()=>[...t[7]||(t[7]=[p("生成图片",-1)])]),_:1})]),_:1})]),_:1}),I("canvas",{ref_key:"canvas",ref:l,width:"340"},null,512)])}}},Q=R(G,[["__scopeId","data-v-3c518d4e"]]);export{Q as default};
