import{o as R,u as k}from"./resources-6e3d64cc.js";import{a as w,aw as C,f as L,e as D,aQ as g,T as H,U as P,a5 as a,$ as s,V as S,a3 as p}from"./vendor-13527336.js";import{_ as N,E as $}from"./index-5c866205.js";const W=""+new URL("../img/dog-1-cef428a6.jpg",import.meta.url).href,A=""+new URL("../img/dog-2-8994bc7d.jpg",import.meta.url).href,M=""+new URL("../img/dog-3-4a11c068.jpg",import.meta.url).href,O=""+new URL("../img/dog-4-179618cc.jpg",import.meta.url).href,Y=(j="",y={})=>{const o=async(e,l={})=>{const n=e.startsWith("http")?e:`${j}${e}`,d={headers:{"Content-Type":"application/json",...y.headers,...l.headers},...y,...l};try{const t=await fetch(n,d);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const f=t.headers.get("content-type");return f!=null&&f.includes("application/json")?await t.json():await t.text()}catch(t){throw console.error("请求失败:",t),t}};return{get:(e,l={},n={})=>{const d=new URLSearchParams(l).toString(),t=d?`${e}?${d}`:e;return o(t,{method:"GET",...n})},post:(e,l={},n={})=>o(e,{method:"POST",body:JSON.stringify(l),...n}),put:(e,l={},n={})=>o(e,{method:"PUT",body:JSON.stringify(l),...n}),delete:(e,l={})=>o(e,{method:"DELETE",...l}),request:o}},q=Y();const z={class:"dog"},B=["src"],G={__name:"dog",setup(j){var y={method:"GET",redirect:"follow"};const o=w(null),e=w(null),l=C(new Date).format("YYYY年MM月DD日"),n=w("1"),d=L(()=>`${R}${k}dog-${n.value}.jpg`),t=w(""),f=()=>{q.get("https://v2.xxapi.cn/api/dog",y).then(i=>{const u=i.data;t.value=`${l},${u}`})},V=()=>{if(!t.value){$.warning("请先获取文案或输入文案");return}const i=new Image;i.onload=function(){let x=30,_=0;const c=[],T=24;e.value.font=`${T}px Arial`;let r="";for(let v of t.value)e.value.measureText(r+v).width>680?(c.push(r),r=v):r+=v;r.length>0&&c.push(r);const E=i.width/i.height,b=340,U=b/E,I=U+20+c.length*28+30;o.value.width=340,o.value.height=I,e.value.clearRect(0,0,o.value.width,o.value.height),e.value.fillStyle="#ffffff",e.value.fillRect(0,0,o.value.width,o.value.height),e.value.drawImage(i,20,20,b,U),_=U+40,e.value.fillStyle="#000000";for(let v of c)e.value.fillText(v,x,_),_+=28;e.value.strokeStyle="#ebeef5",e.value.lineWidth=1,e.value.strokeRect(20,20,o.value.width-40,o.value.height-40),$.success("图片生成成功！")},i.onerror=function(){$.error("图片加载失败，请检查网络连接")};const u={1:W,2:A,3:M,4:O};i.src=u[n.value]};return D(()=>{e.value=o.value.getContext("2d")}),(i,u)=>{const m=g("el-row"),h=g("el-radio"),x=g("el-radio-group"),_=g("el-input"),c=g("el-button"),T=g("el-space");return H(),P("div",z,[a(T,{direction:"vertical",size:"large"},{default:s(()=>[a(m,{type:"flex",justify:"center"},{default:s(()=>[S("img",{src:d.value,alt:"",class:"top-img"},null,8,B)]),_:1}),a(m,{type:"flex",justify:"center"},{default:s(()=>[a(x,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=r=>n.value=r)},{default:s(()=>[a(h,{value:"1",label:"舔狗男"},{default:s(()=>[p("舔狗男")]),_:1}),a(h,{value:"2",label:"舔狗女"},{default:s(()=>[p("舔狗女")]),_:1}),a(h,{value:"3",label:"记仇男"},{default:s(()=>[p("记仇男")]),_:1}),a(h,{value:"4",label:"记仇女"},{default:s(()=>[p("记仇女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:s(()=>[a(_,{modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=r=>t.value=r),style:{width:"360px"},autosize:"",type:"textarea",placeholder:"Please input"},null,8,["modelValue"])]),_:1}),a(m,{type:"flex",justify:"center"},{default:s(()=>[a(c,{type:"primary",onClick:f},{default:s(()=>[p("随机文案")]),_:1}),a(c,{type:"primary",onClick:V},{default:s(()=>[p("生成图片")]),_:1})]),_:1})]),_:1}),S("canvas",{ref_key:"canvas",ref:o,width:"340"},null,512)])}}},K=N(G,[["__scopeId","data-v-3c518d4e"]]);export{K as default};
