import{_ as x,a as E}from"./index-bd91161a.js";import{a as c,e as w,a9 as I,T as r,U as l,I as _,ar as p,n as k,V as T,a5 as L,u as O}from"./vendor-6dd3827f.js";const U={class:"waterfall-container"},u=4,z=350,A=100,C={__name:"Daily",setup(M){const d=c(Array.from({length:296},(e,s)=>({id:s+1,thumbnail:`https://gaoziyuan.oss-cn-beijing.aliyuncs.com/photos/${s+1}.jpg?x-oss-process=image/resize,w_350,h_350,m_fill`,loaded:!1}))),i=c([]),m=()=>{i.value=Array.from({length:u},()=>[]);const e=new Array(u).fill(0);d.value.forEach((s,n)=>{let t=0;for(let o=1;o<u;o++)e[o]<e[t]&&(t=o);i.value[t].push({...s}),e[t]+=z+15})},h=e=>i.value[e]||[];let a=null;const f=c([]),v=()=>{a=new IntersectionObserver(e=>{e.forEach(s=>{if(s.isIntersecting){const n=s.target,t=n.dataset.id,o=d.value.find(b=>b.id==t);o&&!o.loaded&&(o.loaded=!0,a.unobserve(n))}})},{rootMargin:`${A}px 0px`})},g=()=>{a&&k(()=>{f.value.forEach(e=>{e&&a.observe(e)})})};w(()=>{m(),v(),g()}),I(()=>{a&&a.disconnect()});const y=e=>[e.thumbnail.split("?")[0]];return(e,s)=>(r(),l("div",U,[(r(),l(_,null,p(4,n=>T("div",{class:"waterfall-column",key:n},[(r(!0),l(_,null,p(h(n-1),t=>(r(),l("div",{key:t.id,class:"photo-item",ref_for:!0,ref_key:"photoRefs",ref:f},[L(O(E),{class:"photo-image",src:t.thumbnail,fit:"cover","preview-src-list":y(t),loading:"lazy","hide-on-click-modal":""},null,8,["src","preview-src-list"])]))),128))])),64))]))}},D=x(C,[["__scopeId","data-v-e43d5db5"]]);export{D as default};
